<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script> -->
</head>

<body>
    <ul class="jsonp_data"></ul>
    <script>
        // 跨域: 协议 域名 端口; 只要有一个不一样就是跨域
        // 浏览器的安全机制; 后台服务器没有跨域这一说
        // 常见的解决跨域的方法
        // jsonp cors(让后台在响应头中添加一个 'Access-Control-Allow-Origin:*')
        // Proxy 代理
        // jsonp 利用了script的标签的 src属性 不存在跨域这一说 的特性 
        // 利用src引入 一个js文件 这个js文件中 只有一个函数执行 后台把数据通过函数传参的方式传给前端
        // $.ajax({
        //     url:'https://money.163.com/special/002557S6/newsdata_gp_index.js',
        //     dataType:'jsonp',
        //     jsonpCallback:'data_callback',
        //     success:function() {

        //     },
        //     error: function() {

        //     }
        // })
        function data_callback(data) {
            console.log(data);

        }
        const jsonpData = document.querySelector('.jsonp_data');

        function fn123(data) {
            console.log(data);
            let data1 = data.ads;
            console.log(data1);
            let str = '';
            data1.forEach(item => {
                // console.log(data1[index].title);
                str += `<li>${item.title}</li>`;

            });
            jsonpData.innerHTML = str;
            // data.forEach(index => {
            //    console.log(ads[index].title)
            // });

        }

        // function fn234(data) {
        //     console.log(data);

        // }
    </script>
    <script src="https://money.163.com/special/002557S6/newsdata_gp_index.js?callback=data_callback"></script>
    <script src="https://nex.163.com/q?app=7BE0FC82&c=news&l=21,22,23,24,25,26,27,28,29,30&site=netease&affiliate=news&cat=homepage&type=stream&location=1,2,3,4,5,6,7,8,9,10&cb=fn123"></script>
    <!-- <script src="https://opehs.tanx.com/ex?i=mm_15890324_2192376_13096223&cb=fn234&callback=&userid=&o=&f=&n=&r=&cg=a883f205f9593c63fde4bed8530e1ba5&pvid=af85993bc6e6ceb9fe0674e54c86a60a&u=https%3A%2F%2Fwww.sina.com.cn%2F&psl=1&fp=1.DmTdwzR9Hrfz6u6JAGsyOI_9iFSg9BF0RMhTZC9Mp9nu8wEi_Ag~Yo.UTF-8.g2mitbRpmYrhlA.Q.14rciws"></script> -->

    <!-- 
        前端声明一个函数 fn1
        然后用script标签 引入一个 JS文件
        引入的JS文件执行时, 会把我们定义好的函数执行了; 并把数据通过实参传给 我们的fn1
        目的是为了从后台获取数据 ；ajax ,但是ajax有跨域问题，cors
        使用jsonp ;

    -->

</body>

</html>